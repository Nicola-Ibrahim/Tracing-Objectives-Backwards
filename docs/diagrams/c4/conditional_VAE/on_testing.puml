@startuml
'----------------------------------------------------
' Real-time VAE Inference & Interpolation Diagram
'----------------------------------------------------
top to bottom direction
skinparam componentStyle rectangle
skinparam roundcorner 15
skinparam backgroundColor #FAFAFA
skinparam component {
  BorderColor #333333
  FontSize 12
  FontName Arial
  BackgroundColor<<Input>> #D6E9FF
  BackgroundColor<<Encoder>> #ADD8E6
  BackgroundColor<<Latent>> #F9E79F
  BackgroundColor<<Interp>> #FDEBD0
  BackgroundColor<<Decoder>> #ABEBC6
  BackgroundColor<<Output>> #F5B7B1
  BackgroundColor<<Validation>> #EBDEF0
}

'----------------------------------------------------
' Components (Testing Mode) 
'----------------------------------------------------
component "Input Conditions:\n- Distance = 8 km  (Test Case)\n- Time Weight = 0.6\n- Energy Weight = 0.4" as IN <<Input>>
component "<&cogs> VAE Encoder\n(Inference Only: μ, σ)" as ENC <<Encoder>>
component "<&key> Latent Space Z\n(Encoded Vectors)" as LAT <<Latent>>
component "<&shuffle> Latent Interpolation\n(Linear Interpolation Between Z_i & Z_j)" as INT <<Interp>>
component "<&filter> Physics-Constrained Decoder\n(Inference Only: Generate u(t))" as DEC <<Decoder>>
component "<&play> Output: Control Profile\n(Real-Time Commands)" as OUT <<Output>>
component "<&gear> Digital Twin Checker\n(Validate Feasible Trajectory)" as VAL <<Validation>>

'----------------------------------------------------
' Connections & Interpolation Flow
'----------------------------------------------------
IN   --> ENC : encode → μ, σ
ENC  --> LAT : produce z
' Optional testing interpolation branch
LAT  --> INT : select z vectors for interpolation
INT  --> DEC : decode intermediate profiles
' Direct inference path (no interpolation)
LAT  --> DEC : decode single profile
DEC  --> OUT : dispatch commands

' Real-time validation
OUT  --> VAL : check feasibility & safety

@enduml
